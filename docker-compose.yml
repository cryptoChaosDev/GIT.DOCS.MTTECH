version: '3.8'

services:
  git-docs-bot:
    build: .
    container_name: git-docs-bot
    environment:
      - BOT_TOKEN=${BOT_TOKEN}
      - ADMIN_IDS=${ADMIN_IDS}
      - REPO_PATH=/app/repo
      - USER_REPOS_DIR=/app/user_repos
      - USER_REPOS_FILE=/app/data/user_repos.json
      - LOCKS_FILE=/app/data/locks.json
      - LOG_DIR=/app/logs
      - AUTO_UNLOCK_ON_UPLOAD=${AUTO_UNLOCK_ON_UPLOAD:-false}
    volumes:
      - ./user_repos:/app/user_repos
      - ./logs:/app/logs
      - ./data:/app/data
    restart: unless-stopped
    networks:
      - gitdocs_network

networks:
  gitdocs_network:
    driver: bridge